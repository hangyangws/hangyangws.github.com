<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ã€Œç§»åŠ¨è®¾å¤‡é™€èºä»ªã€ä¸ã€Œpreserve-3dã€ç¢°æ’çš„ç«èŠ±]]></title>
    <url>%2F2019%2F06%2F26%2Fpreserve-3d%2F</url>
    <content type="text"><![CDATA[æ¶‰åŠçŸ¥è¯†ã€ŒCSSï¼štransformã€JSï¼šdeviceorientationã€ åºŸè¯ä¸å¤šï¼Œå…ˆä¸Š DEMOã€Œè¯·ä½¿ç”¨ç§»åŠ¨è®¾å¤‡æŸ¥çœ‹ã€ å¦‚ä½•æ­å»ºä¸€ä¸ªç®€å•çš„ç«‹æ–¹ä½“åªéœ€è¦å¯¥å¯¥å‡ è¡Œ HTMLã€CSS ä»£ç å°±èƒ½äº§å‡ºä¸€ä¸ªã€Œç«‹æ–¹ä½“ã€ æ ¸å¿ƒ HTML å¦‚ä¸‹ 12345678910111213141516171819202122&lt;div class="cube"&gt; &lt;span class="cube-face cube-front"&gt;&lt;/span&gt; &lt;span class="cube-face cube-back"&gt;&lt;/span&gt; &lt;span class="cube-face cube-left"&gt;&lt;/span&gt; &lt;span class="cube-face cube-right"&gt;&lt;/span&gt; &lt;span class="cube-face cube-top"&gt;&lt;/span&gt; &lt;span class="cube-face cube-bottom"&gt;&lt;/span&gt;&lt;/div&gt;&lt;!-- 6 ä¸ª &lt;span /&gt; è¡¨ç¤ºç«‹æ–¹ä½“çš„ 6 ä¸ªé¢ --&gt;&lt;!-- è¿™é‡Œæœ‰ä¸ªå°æ’æ›²ï¼š èµ·åˆï¼Œæˆ‘ä½¿ç”¨çš„ 6 ä¸ª &lt;i /&gt; æ ‡ç­¾ï¼Œå› ä¸ºå¤§éƒ¨åˆ†è¡¨ç¤ºã€Œå›¾å½¢ã€å›¾æ ‡ã€çš„å…ƒç´ éƒ½ç”¨ &lt;i /&gt; æ ‡ç­¾ï¼Œ ä¸è¿‡ï¼Œå¼ºè¿«ç—‡çš„æˆ‘ï¼Œç»†ç»†æƒ³æ¥ï¼Œ&lt;i /&gt; æ˜¯è¡¨ç¤ºçš„ã€Œæ–œä½“æ–‡å­—ã€ï¼Œè¯­ä¹‰ä¸Šå®Œå…¨ä¸åŒ¹é…å•Šã€‚ æ‰€ä»¥ï¼Œæˆ‘åœ¨çŸ¥ä¹ä¸Šæœåˆ°è¿™æ ·ä¸€ä¸ªæè¿°ï¼š[ä¸ºä»€ä¹ˆå¤§å®¶éƒ½ç”¨iæ ‡ç­¾&lt;i&gt;&lt;/i&gt;ç”¨ä½œå°å›¾æ ‡?](https://www.zhihu.com/question/26880548) æœ‰ä¸ªå›ç­”ï¼š ã€Œ å¤§å®¶éƒ½éµå¾ªå¼€æ”¾çš„æ ‡å‡†æ¥åšäº‹ï¼Œæœªæ¥å¯èƒ½å°‘èµ°å¼¯è·¯ã€‚ å°‘ç”¨ hack çš„æ–¹æ³•è§£å†³é—®é¢˜ï¼Œæœ‰åŠ©äºä½ å†™å‡ºå‘æœªæ¥å…¼å®¹çš„ä»£ç ã€‚ ã€ æˆ‘å¾ˆèµåŒï¼Œæ‰€ä»¥å°±æŠŠ &lt;i /&gt; æ”¹æˆäº† &lt;span /&gt;ã€‚ --&gt; CSS ç¬¬ä¸€æ­¥ 1234567891011121314151617181920.cube &#123; width: 160px; height: 160px; position: relative; -webkit-transform-style: preserve-3d; /* è¿™ä¸€å¥é‡ç‚¹ */ transform-style: preserve-3d; -webkit-transform: rotateX(10deg) rotateY(10deg) rotateZ(10deg); transform: rotateX(10deg) rotateY(10deg) rotateZ(10deg);&#125;.cube-face &#123; display: block; position: absolute; width: 100%; height: 100%; box-shadow: inset 0 0 4px 1px #fff; box-sizing: border-box; background: -webkit-linear-gradient(45deg, rgba(156, 144, 144, .6), #000); background: -o-linear-gradient(45deg, rgba(156, 144, 144, .6), #000); background: linear-gradient(45deg, rgba(156, 144, 144, .6), #000)&#125; è¿™ä¸ª CSS è¿‡äºç®€å•ï¼Œå°±ä¸èµ˜è¿°ä¸è§£é‡Šã€‚ä¸»è¦æ˜¯è¦è®¾ç½®çˆ¶å…ƒç´  .cube çš„ transform-style: preserve-3dï¼Œ ä½¿å­å…ƒç´ ä½äº 3D ç©ºé—´ä¸­ï¼Œä¸ç„¶å­å…ƒç´ éƒ½æ˜¯ã€Œå¹³é¢å†…ã€æ‰å¹³åŒ–ã€ï¼Œè¾¾ä¸åˆ° 3D æ•ˆæœã€‚ ç»™æ‰€æœ‰å­å…ƒç´  .cube-face è®¾ç½®äº†é€æ˜çš„æ¸å˜è‰² rgba(156, 144, 144, .6) èƒŒæ™¯ï¼Œæ˜¯ä¸ºäº†æ›´å¥½çš„è§‚å¯Ÿåˆ°ã€Œè¢«é®ä½çš„åé¢ã€ï¼Œè§†è§‰ä¸Šæ›´åŠ  ç«‹ä½“ ç›®å‰æ•ˆæœæˆªå›¾å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼š çœ‹èµ·æ¥å°±åƒä¸€ä¸ªæ­£æ–¹å½¢ï¼Œå…¶å®æ˜¯ 6 ä¸ªé¢å…¨éƒ¨é‡å åœ¨ä¸€èµ·ã€‚ CSS ç¬¬äºŒæ­¥ 1234.cube-front &#123; -webkit-transform: translateZ(80px); transform: translateZ(80px);&#125; ä¸Šé¢ 4 è¡Œä»£ç ä½¿å¾—ã€Œæ­£é¢ .cube-frontã€å‘å‰ç§»åŠ¨ 80pxã€Œä¹Ÿå°±æ˜¯ç«‹æ–¹ä½“ä¸€åŠçš„è¾¹é•¿ã€ã€‚åŒç†æˆ‘ä»¬å¯ä»¥è®¾ç½®ã€ŒèƒŒé¢ .cube-backã€å‘åç§»åŠ¨ 80pxæ•ˆæœå¤§æ¦‚æ˜¯è¿™æ ·ï¼š CSS ç¬¬ä¸‰æ­¥ 1234.cube-left &#123; -webkit-transform: rotateY(90deg); transform: rotateY(90deg);&#125; ä¸Šé¢ 4 è¡Œä»£ç ä½¿å¾—ã€Œå·¦é¢ .cube-leftã€å…ˆé¡ºæ—¶é’ˆæ—‹è½¬ã€Œ90 åº¦ã€å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼š ç„¶åå†å‘ã€Œå·¦è¾¹ã€ç§»åŠ¨ 80px å°± OK å•¦ï¼Œæ³¨æ„ï¼šå·¦è¾¹æ˜¯ Z è½´è´Ÿæ–¹å‘ã€‚ 1234.cube-left &#123; -webkit-transform: rotateY(90deg) translateZ(-80px); transform: rotateY(90deg) translateZ(-80px);&#125; å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼š åŒç†ï¼Œæˆ‘ä»¬å¯ä»¥åšå‡ºå³è¾¹çš„æ•ˆæœï¼Œå”¯ä¸€åŒºåˆ«å°±æ˜¯ï¼Œå³è¾¹ç§»åŠ¨æ–¹å‘ä¸å·¦è¾¹ç›¸åã€‚é“ç†ç±»ä¼¼ï¼Œå¼‚æ›²åŒå·¥ï¼Œä¸Šè¾¹å’Œä¸‹è¾¹ï¼Œæƒ³å¿…èªæ˜çš„å¤§å®¶éƒ½æŒæ¡äº†æ­£ç¡®å†™æ³•å§¿åŠ¿ã€‚ æˆå“å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼š ç”¨é™€èºä»ªä½¿ç«‹æ–¹ä½“åŠ¨èµ·æ¥ç»†å¿ƒçš„å¼€å‘è€…åº”è¯¥å‘ç°äº†ï¼Œåœ¨æœ€å¼€å§‹ï¼Œæˆ‘ç»™çˆ¶å…ƒç´  .cube è®¾ç½®äº†ï¼štransform: rotateX(10deg) rotateY(10deg) rotateZ(10deg)è®©çˆ¶å…ƒç´ åœ¨ä¸‰ç»´ç©ºé—´ä¸Šæ—‹è½¬ 10 åº¦ã€‚å¦‚æœæˆ‘ä»¬åŠ¨æ€è¿ç»­ä¿®æ”¹è¿™ä¸‰ä¸ªå€¼ï¼Œç»å¯¹å¯ä»¥è¾¾åˆ° 3D æ—‹è½¬åŠ¨ç”»çš„æ•ˆæœã€‚ è¿™ä¸ªæ—¶å€™ï¼ŒJS çš„ deviceorientationã€Œæ£€æµ‹è®¾å¤‡æ–¹å‘ã€ äº‹ä»¶é—ªç°çªç„¶é—ªç°åœ¨æˆ‘çš„è„‘æµ·ã€‚å› ä¸ºè¿™ä¸ªäº‹ä»¶çš„å›è°ƒå‚æ•°é‡Œé¢æ°å¥½æœ‰ä¸‰ä¸ªå‚æ•°ã€Œbetaã€gammaã€alphaã€ï¼Œåˆ†åˆ«ä»£è¡¨ã€ŒXã€Yã€Zã€çš„æ—‹è½¬æ–¹å‘ã€‚ beta è¡¨ç¤ºè®¾å¤‡åœ¨ x è½´ä¸Šçš„æ—‹è½¬è§’åº¦ï¼ŒèŒƒå›´ä¸º [-180, 180] åº¦ã€‚å®ƒæè¿°çš„æ˜¯è®¾å¤‡ç”±å‰å‘åæ—‹è½¬çš„æƒ…å†µã€‚gamma è¡¨ç¤ºè®¾å¤‡åœ¨ y è½´ä¸Šçš„æ—‹è½¬è§’åº¦ï¼ŒèŒƒå›´ä¸º [-90, 90] åº¦ã€‚å®ƒæè¿°çš„æ˜¯è®¾å¤‡ç”±å·¦å‘å³æ—‹è½¬çš„æƒ…å†µã€‚alpha è¡¨ç¤ºè®¾å¤‡æ²¿ z è½´ä¸Šçš„æ—‹è½¬è§’åº¦ï¼ŒèŒƒå›´ä¸º [0, 360] åº¦ã€‚ å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼š æ³¨å†Œ deviceorientation äº‹ä»¶ï¼Œå¾—åˆ° xã€yã€z 1234567const handleOrientation = (&#123;beta: x, gamma: y, alpha: z&#125;) =&gt; &#123; // 1. å¾—åˆ° xã€yã€z // 2. å¤„ç† xã€yã€z // 3. ä½¿ç”¨ xã€yã€z&#125;global.addEventListener('deviceorientation', handleOrientation) å¤„ç† xã€yã€z ç”±äºæˆ‘ä»¬æœŸæœ›ç«‹æ–¹ä½“å¯ä»¥åœ¨ xã€yã€z ä¸‰ä¸ªåå‘çš„æ—‹è½¬èŒƒå›´æ˜¯ [-360, 360] åº¦ï¼Œä½†æ˜¯ betaã€gammaã€alpha çš„èŒƒå›´å¹¶ä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„èŒƒå›´ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å¤„ç†ä¸€ä¸‹æ•°æ®ã€‚ 12345&#123; x: x * 2, y: y * 4, z: (z - 180) * 2&#125; ä½¿ç”¨ xã€yã€z æˆ‘ä»¬ç°åœ¨å¾—åˆ°çš„ xã€yã€z å·²ç»åœ¨ [-360, 360] åº¦èŒƒå›´å†…äº†ï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯ï¼Œä½¿ç”¨ xã€yã€z ä¿®æ”¹çˆ¶å…ƒç´  .cube çš„ rotateX(xdeg) rotateY(ydeg) rotateZ(zdeg) æ—‹è½¬å€¼ã€‚ å®Œæ•´çš„ä»£ç å¤§æ¦‚æ˜¯è¿™æ ·ï¼š 12345678910111213const cube = document.querySelector('.cube')const setCubePosition = (&#123;x = 0, y = 0, z = 0&#125;) =&gt; &#123; cube.style = `transform: rotateX($&#123;x&#125;deg) rotateY($&#123;y&#125;deg) rotateZ($&#123;x&#125;deg);-webkit-transform: rotateX($&#123;x&#125;deg) rotateY($&#123;y&#125;deg) rotateZ($&#123;x&#125;deg);`&#125;const handleOrientation = (&#123;beta: x, gamma: y, alpha: z&#125;) =&gt; &#123; setCubePosition(&#123; x: x * 2, y: y * 4, z: (z - 180) * 2 &#125;)&#125;global.addEventListener('deviceorientation', handleOrientation) åº†ç¥æ—¶åˆ»ç°åœ¨æˆ‘ä»¬å·²ç»å®Œæˆäº†ï¼Œä¸€ä¸ªåˆ©ç”¨ã€Œç§»åŠ¨è®¾å¤‡é™€èºä»ªã€ä¸ã€Œpreserve-3dã€å®ç°çš„ 3D äº¤äº’æ•ˆæœã€‚è®©æˆ‘ä»¬ä¸ºè‡ªå·±é¼“æŒ ğŸ‘ğŸ‘ğŸ‘ ç‚¹æˆ‘æŸ¥çœ‹å®Œæ•´ä»£ç  æ„Ÿè°¢é˜…è¯»]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
</search>
